services:
  serena-mcp:
    image: serena-mcp:latest
    build:
      context: .
      dockerfile: Dockerfile
    container_name: serena-mcp
    # ports:
    #   - "8000:8000"  # Web dashboard
    volumes:
      - ${FOLDER}:/workspace
      - serena_data:/root/.serena
      - ./project.yml:/root/.serena/project.yml
    environment:
      - SERENA_CONTEXT=ide-assistant
    working_dir: /workspace
    stdin_open: true
    tty: true
    command: ["serena", "start-mcp-server", "--context", "ide-assistant", "--project", "/workspace"]

volumes:
  serena_data:
    driver: local

